{"ast":null,"code":"var _jsxFileName = \"/Users/vladikbaryshpolets/Desktop/Final_project_Online-store/src/components/ProductPage/ProductRate/ProductRate.jsx\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { Rate } from 'antd';\nimport { connect } from 'react-redux';\nimport { RateBox, ReviewsCount } from './StylesProductRate';\nimport { getOneProduct, updateOneProduct } from '../../../store/products/middleware';\nimport rateCalculator from '../../../utils/rateCalculator';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductRate = connect(null, {\n  updateOneProduct\n})(_s(({\n  reviews,\n  productID,\n  itemNo,\n  updateOneProduct\n}) => {\n  _s();\n\n  const {\n    rating,\n    reviewsQuantity\n  } = rateCalculator(reviews);\n  const [rate, setRate] = useState(rating);\n  const [reviewsCount, setReviewsCount] = useState(reviewsQuantity);\n\n  const handleChange = async value => {\n    if (value === 0) return;\n    setRate(value);\n    const response = await getOneProduct(itemNo);\n    if (!response || response.status !== 200) return;\n    const product = response.data;\n    const reviewsArr = product.reviews;\n    const updatedProduct = { ...product,\n      reviews: [...reviewsArr, value]\n    };\n    const result = await updateOneProduct(productID, updatedProduct);\n    if (!result || result.status !== 200) return;\n    const newReviewsArr = result.data.reviews;\n    const {\n      reviewsQuantity\n    } = rateCalculator(newReviewsArr);\n    setReviewsCount(reviewsQuantity);\n  };\n\n  const desc = ['terrible', 'bad', 'normal', 'good', 'wonderful'];\n  return /*#__PURE__*/_jsxDEV(RateBox, {\n    children: [/*#__PURE__*/_jsxDEV(ReviewsCount, {\n      children: [\"Reviews (\", reviewsCount, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: /*#__PURE__*/_jsxDEV(Rate, {\n        tooltips: desc,\n        onChange: handleChange,\n        value: rate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}, \"VUmEVxbeWevSS7FMnXhoAavY8is=\"));\nProductRate.propTypes = {\n  reviews: PropTypes.instanceOf(Array).isRequired,\n  productID: PropTypes.string.isRequired,\n  itemNo: PropTypes.string.isRequired,\n  updateOneProduct: PropTypes.func\n};\nexport default ProductRate;","map":{"version":3,"sources":["/Users/vladikbaryshpolets/Desktop/Final_project_Online-store/src/components/ProductPage/ProductRate/ProductRate.jsx"],"names":["PropTypes","React","useState","Rate","connect","RateBox","ReviewsCount","getOneProduct","updateOneProduct","rateCalculator","ProductRate","reviews","productID","itemNo","rating","reviewsQuantity","rate","setRate","reviewsCount","setReviewsCount","handleChange","value","response","status","product","data","reviewsArr","updatedProduct","result","newReviewsArr","desc","propTypes","instanceOf","Array","isRequired","string","func"],"mappings":";;;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,EAAkBC,YAAlB,QAAsC,qBAAtC;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,oCAAhD;AACA,OAAOC,cAAP,MAA2B,+BAA3B;;AAEA,MAAMC,WAAW,GAAGN,OAAO,CAAC,IAAD,EAAO;AAAEI,EAAAA;AAAF,CAAP,CAAP,IAAoC,CAAC;AACvDG,EAAAA,OADuD;AAEvDC,EAAAA,SAFuD;AAGvDC,EAAAA,MAHuD;AAIvDL,EAAAA;AAJuD,CAAD,KAKlD;AAAA;;AACJ,QAAM;AAAEM,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAA8BN,cAAc,CAACE,OAAD,CAAlD;AAEA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAACY,MAAD,CAAhC;AACA,QAAM,CAACI,YAAD,EAAeC,eAAf,IAAkCjB,QAAQ,CAACa,eAAD,CAAhD;;AAEA,QAAMK,YAAY,GAAG,MAAOC,KAAP,IAAiB;AACpC,QAAIA,KAAK,KAAK,CAAd,EAAiB;AACjBJ,IAAAA,OAAO,CAACI,KAAD,CAAP;AACA,UAAMC,QAAQ,GAAG,MAAMf,aAAa,CAACM,MAAD,CAApC;AACA,QAAI,CAACS,QAAD,IAAaA,QAAQ,CAACC,MAAT,KAAoB,GAArC,EAA0C;AAE1C,UAAMC,OAAO,GAAGF,QAAQ,CAACG,IAAzB;AACA,UAAMC,UAAU,GAAGF,OAAO,CAACb,OAA3B;AAEA,UAAMgB,cAAc,GAAG,EACrB,GAAGH,OADkB;AAErBb,MAAAA,OAAO,EAAE,CAAC,GAAGe,UAAJ,EAAgBL,KAAhB;AAFY,KAAvB;AAIA,UAAMO,MAAM,GAAG,MAAMpB,gBAAgB,CAACI,SAAD,EAAYe,cAAZ,CAArC;AACA,QAAI,CAACC,MAAD,IAAWA,MAAM,CAACL,MAAP,KAAkB,GAAjC,EAAsC;AAEtC,UAAMM,aAAa,GAAGD,MAAM,CAACH,IAAP,CAAYd,OAAlC;AACA,UAAM;AAAEI,MAAAA;AAAF,QAAsBN,cAAc,CAACoB,aAAD,CAA1C;AACAV,IAAAA,eAAe,CAACJ,eAAD,CAAf;AACD,GAnBD;;AAoBA,QAAMe,IAAI,GAAG,CAAC,UAAD,EAAa,KAAb,EAAoB,QAApB,EAA8B,MAA9B,EAAsC,WAAtC,CAAb;AAEA,sBACE,QAAC,OAAD;AAAA,4BACE,QAAC,YAAD;AAAA,8BAEGZ,YAFH;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAME;AAAA,6BACE,QAAC,IAAD;AAAM,QAAA,QAAQ,EAAEY,IAAhB;AAAsB,QAAA,QAAQ,EAAEV,YAAhC;AAA8C,QAAA,KAAK,EAAEJ;AAArD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YANF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAYD,CA7CmB,kCAApB;AA+CAN,WAAW,CAACqB,SAAZ,GAAwB;AACtBpB,EAAAA,OAAO,EAAEX,SAAS,CAACgC,UAAV,CAAqBC,KAArB,EAA4BC,UADf;AAEtBtB,EAAAA,SAAS,EAAEZ,SAAS,CAACmC,MAAV,CAAiBD,UAFN;AAGtBrB,EAAAA,MAAM,EAAEb,SAAS,CAACmC,MAAV,CAAiBD,UAHH;AAItB1B,EAAAA,gBAAgB,EAAER,SAAS,CAACoC;AAJN,CAAxB;AAOA,eAAe1B,WAAf","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { useState } from 'react'\nimport { Rate } from 'antd'\nimport { connect } from 'react-redux'\nimport { RateBox, ReviewsCount } from './StylesProductRate'\nimport { getOneProduct, updateOneProduct } from '../../../store/products/middleware'\nimport rateCalculator from '../../../utils/rateCalculator'\n\nconst ProductRate = connect(null, { updateOneProduct })(({\n  reviews,\n  productID,\n  itemNo,\n  updateOneProduct\n}) => {\n  const { rating, reviewsQuantity } = rateCalculator(reviews)\n\n  const [rate, setRate] = useState(rating)\n  const [reviewsCount, setReviewsCount] = useState(reviewsQuantity)\n  \n  const handleChange = async (value) => {\n    if (value === 0) return\n    setRate(value)\n    const response = await getOneProduct(itemNo)\n    if (!response || response.status !== 200) return\n    \n    const product = response.data\n    const reviewsArr = product.reviews\n    \n    const updatedProduct = {\n      ...product,\n      reviews: [...reviewsArr, value]\n    }\n    const result = await updateOneProduct(productID, updatedProduct)\n    if (!result || result.status !== 200) return\n    \n    const newReviewsArr = result.data.reviews\n    const { reviewsQuantity } = rateCalculator(newReviewsArr)\n    setReviewsCount(reviewsQuantity)\n  }\n  const desc = ['terrible', 'bad', 'normal', 'good', 'wonderful']\n\n  return (\n    <RateBox>\n      <ReviewsCount>\n        Reviews (\n        {reviewsCount}\n        )\n      </ReviewsCount>\n      <span>\n        <Rate tooltips={desc} onChange={handleChange} value={rate} />\n      </span>\n    </RateBox>\n  )\n})\n\nProductRate.propTypes = {\n  reviews: PropTypes.instanceOf(Array).isRequired,\n  productID: PropTypes.string.isRequired,\n  itemNo: PropTypes.string.isRequired,\n  updateOneProduct: PropTypes.func\n}\n\nexport default ProductRate"]},"metadata":{},"sourceType":"module"}