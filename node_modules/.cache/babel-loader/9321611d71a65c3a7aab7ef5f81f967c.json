{"ast":null,"code":"import axios from 'axios';\nimport { DOMAIN, getHeaders } from '../../utils/constants';\nimport { setProducts, addProduct, updateProduct, setProductsToCatalog, setCatalogProductsQuantity, cleanCatalogProducts, setSearchProducts } from './actionCreator';\nconst BASE_ENDPOINT = `${DOMAIN}/products`;\nexport const getProducts = () => dispatch => {\n  axios.get(BASE_ENDPOINT).then(data => {\n    if (data.status === 200) {\n      dispatch(setProducts(data.data));\n    }\n  }).catch(error => error.response);\n};\nexport const addOneProduct = newProduct => dispatch => {\n  const headers = getHeaders();\n  const res = axios.post(BASE_ENDPOINT, newProduct, {\n    headers\n  }).then(data => {\n    if (data.status === 200) {\n      dispatch(addProduct(newProduct));\n    }\n\n    return data;\n  }).catch(error => error.response);\n  return res;\n};\nexport const updateOneProduct = (id, newProduct) => dispatch => {\n  const headers = getHeaders();\n  const res = axios.put(`${BASE_ENDPOINT}/${id}`, newProduct, {\n    headers\n  }).then(data => {\n    if (data.status === 200) {\n      dispatch(updateProduct(data.data));\n    }\n\n    return data;\n  }).catch(error => error.response);\n  return res;\n};\nexport const getOneProduct = itemNo => {\n  const res = axios.get(`${BASE_ENDPOINT}/${itemNo}`).then(data => data).catch(error => error.response);\n  return res;\n};\nexport const getFilteredProducts = (param, actionCreator) => dispatch => {\n  let paramStr = '';\n  Object.keys(param).forEach((key, index) => {\n    if (index === 0) {\n      return paramStr += `${key}=${param[key]}`;\n    }\n\n    return paramStr += `&${key}=${param[key]}`;\n  });\n  const res = axios.get(`${BASE_ENDPOINT}/filter?${paramStr}`).then(res => {\n    if (res.status === 200) dispatch(actionCreator(res.data.products));\n    return res;\n  }).catch(error => error.response);\n  return res;\n};\nexport const getProductsToCatalog = param => dispatch => {\n  dispatch(cleanCatalogProducts());\n  const res = axios.get(`${BASE_ENDPOINT}/filter${param}`).then(res => {\n    if (res.status === 200) {\n      dispatch(setProductsToCatalog(res.data.products));\n      dispatch(setCatalogProductsQuantity(res.data.productsQuantity));\n    }\n\n    return res;\n  }).catch(error => {\n    dispatch(setCatalogProductsQuantity(0));\n    return error;\n  });\n  return res;\n};\nexport const getSearchProducts = searchPhrases => dispatch => {\n  axios.post(`${BASE_ENDPOINT}/search`, searchPhrases).then(({\n    data\n  }) => {\n    dispatch(setSearchProducts(data));\n  }).catch(err => err);\n};","map":{"version":3,"sources":["/Users/vladikbaryshpolets/Desktop/Final_project_Online-store/src/store/products/middleware.js"],"names":["axios","DOMAIN","getHeaders","setProducts","addProduct","updateProduct","setProductsToCatalog","setCatalogProductsQuantity","cleanCatalogProducts","setSearchProducts","BASE_ENDPOINT","getProducts","dispatch","get","then","data","status","catch","error","response","addOneProduct","newProduct","headers","res","post","updateOneProduct","id","put","getOneProduct","itemNo","getFilteredProducts","param","actionCreator","paramStr","Object","keys","forEach","key","index","products","getProductsToCatalog","productsQuantity","getSearchProducts","searchPhrases","err"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { DOMAIN, getHeaders } from '../../utils/constants';\nimport {\n  setProducts,\n  addProduct,\n  updateProduct,\n  setProductsToCatalog,\n  setCatalogProductsQuantity,\n  cleanCatalogProducts,\n  setSearchProducts\n} from './actionCreator';\n\nconst BASE_ENDPOINT = `${DOMAIN}/products`\n\nexport const getProducts = () => (dispatch) => {\n  axios.get(BASE_ENDPOINT)\n    .then((data) => {\n      if (data.status === 200) {\n        dispatch(setProducts(data.data))\n      }\n    })\n    .catch((error) => error.response)\n}\n\nexport const addOneProduct = (newProduct) => (dispatch) => {\n  const headers = getHeaders()\n  const res = axios.post(BASE_ENDPOINT, newProduct, { headers })\n    .then((data) => {\n      if (data.status === 200) {\n        dispatch(addProduct(newProduct))\n      }\n      return data\n    })\n    .catch((error) => error.response)\n  return res\n}\n\nexport const updateOneProduct = (id, newProduct) => (dispatch) => {\n  const headers = getHeaders()\n  const res = axios.put(`${BASE_ENDPOINT}/${id}`, newProduct, { headers })\n    .then((data) => {\n      if (data.status === 200) {\n        dispatch(updateProduct(data.data))\n      }\n      return data\n    })\n    .catch((error) => error.response)\n\n  return res\n}\n\nexport const getOneProduct = (itemNo) => {\n  const res = axios.get(`${BASE_ENDPOINT}/${itemNo}`)\n    .then((data) => data)\n    .catch((error) => error.response)\n  return res\n}\n\nexport const getFilteredProducts = (param, actionCreator) => (dispatch) => {\n  let paramStr = ''\n  Object.keys(param).forEach((key, index) => {\n    if (index === 0) {\n      return paramStr += `${key}=${param[key]}`\n    }\n    return paramStr += `&${key}=${param[key]}`\n  })\n  const res = axios.get(`${BASE_ENDPOINT}/filter?${paramStr}`)\n    .then((res) => {\n      if (res.status === 200) dispatch(actionCreator(res.data.products))\n      return res\n    })\n    .catch((error) => error.response)\n  return res\n}\n\nexport const getProductsToCatalog = (param) => (dispatch) => {\n  dispatch(cleanCatalogProducts())\n  const res = axios.get(`${BASE_ENDPOINT}/filter${param}`)\n    .then((res) => {\n      if (res.status === 200) {\n        dispatch(setProductsToCatalog(res.data.products))\n        dispatch(setCatalogProductsQuantity(res.data.productsQuantity))\n      }\n      return res\n    })\n    .catch((error) => {\n      dispatch(setCatalogProductsQuantity(0))\n      return error\n    })\n  return res\n}\n\nexport const getSearchProducts = (searchPhrases) => (dispatch) => {\n  axios\n    .post(`${BASE_ENDPOINT}/search`, searchPhrases)\n    .then(({data}) => {\n      dispatch(setSearchProducts(data))\n    })\n    .catch((err) => err);\n}"]},"metadata":{},"sourceType":"module"}