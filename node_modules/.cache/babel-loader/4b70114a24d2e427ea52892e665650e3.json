{"ast":null,"code":"/* eslint-disable no-unused-vars */\nimport axios from 'axios';\nimport { message } from 'antd';\nimport { DOMAIN, getHeaders } from '../../utils/constants';\nimport { setCustomerInfo, updateCustomerInfo } from './actionCreator';\nconst BASE_ENDPOINT = `${DOMAIN}/customers`;\nexport const createCustomer = (credentials, history) => {\n  axios.post(BASE_ENDPOINT, credentials).then(res => {\n    if (res.status === 200) {\n      history.push('/signin');\n      message.info('New account created successfully');\n    }\n  }).catch(error => {\n    if (error.response) {\n      const requestMessage = error.response.data.message;\n      message.error(`Error: ${requestMessage}`);\n    }\n  });\n};\nexport const changePassword = passwords => {\n  const headers = getHeaders();\n  const res = axios.put(`${BASE_ENDPOINT}/password`, passwords, {\n    headers\n  }).then(data => {\n    if (data.status === 200) {\n      if (data.data.message === 'Password successfully changed') {\n        message.success('Your password have been changed');\n      }\n\n      if (data.data.password === 'Password does not match') {\n        message.error('Old password is wrong ');\n      }\n    }\n  }).catch(error => {\n    if (error.response) {\n      const requestMessage = error.response.data.message;\n      message.error(`Error: ${requestMessage}`);\n    }\n  });\n  return res;\n};\nexport const getCustomer = () => dispatch => {\n  const headers = getHeaders();\n  axios.get(`${BASE_ENDPOINT}/customer`, {\n    headers\n  }).then(data => {\n    if (data.status === 200) {\n      console.log('helo from meddle');\n      dispatch(setCustomerInfo(data.data));\n    }\n  }).catch(error => error.response);\n};\nexport const updateCustomer = (credentials, succesMessage) => dispatch => {\n  const headers = getHeaders();\n  axios.put(BASE_ENDPOINT, credentials, {\n    headers\n  }).then(data => {\n    if (data.status === 200) {\n      dispatch(updateCustomerInfo(credentials));\n      getCustomer();\n\n      if (succesMessage) {\n        message.success('Your contact information has been changed');\n      }\n    }\n  }).catch(error => error.response);\n};","map":{"version":3,"sources":["/Users/vladikbaryshpolets/Desktop/Final_project_Online-store/src/store/customer/middleware.js"],"names":["axios","message","DOMAIN","getHeaders","setCustomerInfo","updateCustomerInfo","BASE_ENDPOINT","createCustomer","credentials","history","post","then","res","status","push","info","catch","error","response","requestMessage","data","changePassword","passwords","headers","put","success","password","getCustomer","dispatch","get","console","log","updateCustomer","succesMessage"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\nimport axios from 'axios';\nimport { message } from 'antd';\nimport { DOMAIN, getHeaders } from '../../utils/constants';\nimport { setCustomerInfo, updateCustomerInfo } from './actionCreator';\n\nconst BASE_ENDPOINT = `${DOMAIN}/customers`;\n\nexport const createCustomer = (credentials, history) => {\n  axios.post(BASE_ENDPOINT, credentials)\n    .then((res) => {\n      if (res.status === 200) {\n        history.push('/signin')\n        message.info('New account created successfully')\n      }\n    })\n    .catch((error) => {\n      if (error.response) {\n        const requestMessage = error.response.data.message\n        message.error(`Error: ${requestMessage}`)\n      }\n    })\n}\n\nexport const changePassword = (passwords) => {\n  const headers = getHeaders();\n  const res = axios.put(`${BASE_ENDPOINT}/password`, passwords, {headers})\n    .then((data) => {\n      if (data.status === 200) {\n        if (data.data.message === 'Password successfully changed') {\n          message.success('Your password have been changed')\n        }\n        if (data.data.password === 'Password does not match') {\n          message.error('Old password is wrong ')\n        }\n      }\n    })\n    .catch((error) => {\n      if (error.response) {\n        const requestMessage = error.response.data.message\n        message.error(`Error: ${requestMessage}`)\n      }\n    })\n  return res\n}\n  \nexport const getCustomer = () => (dispatch) => {\n  const headers = getHeaders()\n  axios.get(`${BASE_ENDPOINT}/customer`, { headers })\n    .then((data) => {\n      if (data.status === 200) {\n        console.log('helo from meddle')\n        dispatch(setCustomerInfo(data.data))\n      }\n    })\n    .catch((error) => error.response)\n}\n\nexport const updateCustomer = (credentials, succesMessage) => (dispatch) => {\n  const headers = getHeaders();\n  axios.put(BASE_ENDPOINT, credentials, {headers})\n    .then((data) => {\n      if (data.status === 200) {\n        dispatch(updateCustomerInfo(credentials))\n        getCustomer()\n        if (succesMessage) {\n          message.success('Your contact information has been changed')\n        }\n      }\n    })\n    .catch((error) => error.response)\n}"]},"metadata":{},"sourceType":"module"}