{"ast":null,"code":"import axios from 'axios';\nimport { message } from 'antd';\nimport { clearRefreshTimer, logIn, logOut } from './actionCreator';\nimport updateWishlistCreator from '../wishlist/actionCreator';\nimport { clearCart } from '../cart/middleware';\nimport { DOMAIN } from '../../utils/constants';\nconst BASE_ENDPOINT = '/customers';\nexport const authLogIn = credentials => async dispatch => {\n  const res = await axios.post(`${DOMAIN}${BASE_ENDPOINT}/login`, credentials).then(data => {\n    if (data.status === 200) {\n      localStorage.setItem('credentials', JSON.stringify(credentials));\n      localStorage.setItem('token', data.data.token);\n      dispatch(logIn());\n    }\n\n    return data;\n  }).catch(error => error.response);\n  return res;\n};\nexport const authLogOut = () => dispatch => {\n  localStorage.removeItem('credentials');\n  localStorage.removeItem('token');\n  localStorage.removeItem('wishlist');\n  dispatch(clearRefreshTimer());\n  dispatch(logOut());\n  dispatch(updateWishlistCreator([]));\n  dispatch(clearCart());\n  message.success('You have been logged out from your account');\n};\nexport default authLogIn;","map":{"version":3,"sources":["/Users/vladikbaryshpolets/Desktop/Final_project_Online-store/src/store/auth/middleware.js"],"names":["axios","message","clearRefreshTimer","logIn","logOut","updateWishlistCreator","clearCart","DOMAIN","BASE_ENDPOINT","authLogIn","credentials","dispatch","res","post","then","data","status","localStorage","setItem","JSON","stringify","token","catch","error","response","authLogOut","removeItem","success"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SAASC,iBAAT,EAA4BC,KAA5B,EAAmCC,MAAnC,QAAiD,iBAAjD;AACA,OAAOC,qBAAP,MAAkC,2BAAlC;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,MAAT,QAAuB,uBAAvB;AAEA,MAAMC,aAAa,GAAG,YAAtB;AAEA,OAAO,MAAMC,SAAS,GAAIC,WAAD,IAAiB,MAAOC,QAAP,IAAoB;AAC5D,QAAMC,GAAG,GAAG,MAAMZ,KAAK,CAACa,IAAN,CAAY,GAAEN,MAAO,GAAEC,aAAc,QAArC,EAA8CE,WAA9C,EACfI,IADe,CACTC,IAAD,IAAU;AACd,QAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCC,IAAI,CAACC,SAAL,CAAeV,WAAf,CAApC;AACAO,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,IAAI,CAACA,IAAL,CAAUM,KAAxC;AACAV,MAAAA,QAAQ,CAACR,KAAK,EAAN,CAAR;AACD;;AACD,WAAOY,IAAP;AACD,GARe,EASfO,KATe,CASRC,KAAD,IAAWA,KAAK,CAACC,QATR,CAAlB;AAUA,SAAOZ,GAAP;AACD,CAZM;AAcP,OAAO,MAAMa,UAAU,GAAG,MAAOd,QAAD,IAAc;AAC5CM,EAAAA,YAAY,CAACS,UAAb,CAAwB,aAAxB;AACAT,EAAAA,YAAY,CAACS,UAAb,CAAwB,OAAxB;AACAT,EAAAA,YAAY,CAACS,UAAb,CAAwB,UAAxB;AACAf,EAAAA,QAAQ,CAACT,iBAAiB,EAAlB,CAAR;AACAS,EAAAA,QAAQ,CAACP,MAAM,EAAP,CAAR;AACAO,EAAAA,QAAQ,CAACN,qBAAqB,CAAC,EAAD,CAAtB,CAAR;AACAM,EAAAA,QAAQ,CAACL,SAAS,EAAV,CAAR;AACAL,EAAAA,OAAO,CAAC0B,OAAR,CAAgB,4CAAhB;AACD,CATM;AAWP,eAAelB,SAAf","sourcesContent":["import axios from 'axios'\nimport { message } from 'antd';\nimport { clearRefreshTimer, logIn, logOut } from './actionCreator'\nimport updateWishlistCreator from '../wishlist/actionCreator'\nimport { clearCart } from '../cart/middleware'\nimport { DOMAIN } from '../../utils/constants';\n\nconst BASE_ENDPOINT = '/customers'\n\nexport const authLogIn = (credentials) => async (dispatch) => {\n  const res = await axios.post(`${DOMAIN}${BASE_ENDPOINT}/login`, credentials)\n    .then((data) => {\n      if (data.status === 200) {\n        localStorage.setItem('credentials', JSON.stringify(credentials))\n        localStorage.setItem('token', data.data.token)\n        dispatch(logIn())\n      }\n      return data\n    })\n    .catch((error) => error.response)\n  return res\n}\n\nexport const authLogOut = () => (dispatch) => {\n  localStorage.removeItem('credentials')\n  localStorage.removeItem('token')\n  localStorage.removeItem('wishlist')\n  dispatch(clearRefreshTimer())\n  dispatch(logOut())\n  dispatch(updateWishlistCreator([]))\n  dispatch(clearCart())\n  message.success('You have been logged out from your account')\n}\n\nexport default authLogIn\n"]},"metadata":{},"sourceType":"module"}