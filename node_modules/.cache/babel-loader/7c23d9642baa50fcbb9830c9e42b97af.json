{"ast":null,"code":"import axios from 'axios';\nimport { message } from 'antd';\nimport { DOMAIN } from '../../utils/constants';\nimport { logIn, logOut } from './actionCreator';\nimport { updateWishlistCreator } from '../wishlist/actionCreator';\nimport { clearCart } from '../cart/middleware';\nimport { clearCustomer } from '../customer/actionCreator';\nconst BASE_ENDPOINT = '/customers';\nexport const authLogIn = credentials => async dispatch => {\n  const res = await axios.post(`${DOMAIN}${BASE_ENDPOINT}/login`, credentials).then(data => {\n    if (data.status === 200) {\n      localStorage.setItem('token', data.data.token);\n      dispatch(logIn());\n    }\n\n    return data;\n  }).catch(error => error.response);\n  return res;\n};\nexport const authLogOut = () => dispatch => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('wishlist');\n  dispatch(logOut());\n  dispatch(updateWishlistCreator([]));\n  dispatch(clearCart());\n  dispatch(clearCustomer());\n  message.info('You have been logged out from your account.');\n};\nexport default authLogIn;","map":{"version":3,"sources":["/Users/vladikbaryshpolets/Desktop/Final_project_Online-store/src/store/auth/middleware.js"],"names":["axios","message","DOMAIN","logIn","logOut","updateWishlistCreator","clearCart","clearCustomer","BASE_ENDPOINT","authLogIn","credentials","dispatch","res","post","then","data","status","localStorage","setItem","token","catch","error","response","authLogOut","removeItem","info"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,iBAA9B;AACA,SAASC,qBAAT,QAAsC,2BAAtC;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,aAAT,QAA8B,2BAA9B;AAEA,MAAMC,aAAa,GAAG,YAAtB;AAEA,OAAO,MAAMC,SAAS,GAAIC,WAAD,IAAiB,MAAOC,QAAP,IAAoB;AAC5D,QAAMC,GAAG,GAAG,MAAMZ,KAAK,CAACa,IAAN,CAAY,GAAEX,MAAO,GAAEM,aAAc,QAArC,EAA8CE,WAA9C,EACfI,IADe,CACTC,IAAD,IAAU;AACd,QAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,IAAI,CAACA,IAAL,CAAUI,KAAxC;AACAR,MAAAA,QAAQ,CAACR,KAAK,EAAN,CAAR;AACD;;AACD,WAAOY,IAAP;AACD,GAPe,EAQfK,KARe,CAQRC,KAAD,IAAWA,KAAK,CAACC,QARR,CAAlB;AASA,SAAOV,GAAP;AACD,CAXM;AAaP,OAAO,MAAMW,UAAU,GAAG,MAAOZ,QAAD,IAAc;AAC5CM,EAAAA,YAAY,CAACO,UAAb,CAAwB,OAAxB;AACAP,EAAAA,YAAY,CAACO,UAAb,CAAwB,UAAxB;AACAb,EAAAA,QAAQ,CAACP,MAAM,EAAP,CAAR;AACAO,EAAAA,QAAQ,CAACN,qBAAqB,CAAC,EAAD,CAAtB,CAAR;AACAM,EAAAA,QAAQ,CAACL,SAAS,EAAV,CAAR;AACAK,EAAAA,QAAQ,CAACJ,aAAa,EAAd,CAAR;AACAN,EAAAA,OAAO,CAACwB,IAAR,CAAa,6CAAb;AACD,CARM;AAUP,eAAehB,SAAf","sourcesContent":["import axios from 'axios'\nimport { message } from 'antd';\nimport { DOMAIN } from '../../utils/constants'\nimport { logIn, logOut } from './actionCreator'\nimport { updateWishlistCreator } from '../wishlist/actionCreator'\nimport { clearCart } from '../cart/middleware'\nimport { clearCustomer } from '../customer/actionCreator'\n\nconst BASE_ENDPOINT = '/customers'\n\nexport const authLogIn = (credentials) => async (dispatch) => {\n  const res = await axios.post(`${DOMAIN}${BASE_ENDPOINT}/login`, credentials)\n    .then((data) => {\n      if (data.status === 200) {\n        localStorage.setItem('token', data.data.token)\n        dispatch(logIn())\n      }\n      return data\n    })\n    .catch((error) => error.response)\n  return res\n}\n\nexport const authLogOut = () => (dispatch) => {\n  localStorage.removeItem('token')\n  localStorage.removeItem('wishlist')\n  dispatch(logOut())\n  dispatch(updateWishlistCreator([]))\n  dispatch(clearCart())\n  dispatch(clearCustomer())\n  message.info('You have been logged out from your account.')\n}\n\nexport default authLogIn\n"]},"metadata":{},"sourceType":"module"}