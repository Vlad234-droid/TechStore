{"ast":null,"code":"import axios from 'axios';\nimport { DOMAIN } from '../general';\nimport { clearRefreshTimer, logIn, logOut } from './actionCreator';\nimport updateWishlistCreator from '../wishlist/actionCreator';\nimport { initialState as wishlistInitialState } from '../wishlist/reducer';\nconst BASE_ENDPOINT = '/customers';\nexport const authLogIn = credentials => async dispatch => {\n  const res = await axios.post(`${DOMAIN}${BASE_ENDPOINT}/login`, credentials).then(data => {\n    if (data.status === 200) {\n      localStorage.setItem('credentials', JSON.stringify(credentials));\n      dispatch(logIn());\n    }\n\n    return data;\n  }).catch(error => error.response);\n  return res;\n};\nexport const authLogOut = () => dispatch => {\n  localStorage.removeItem('credentials');\n  localStorage.removeItem('token');\n  localStorage.removeItem('wishlist');\n  dispatch(clearRefreshTimer());\n  dispatch(logOut());\n  dispatch(updateWishlistCreator(wishlistInitialState));\n};\nexport default authLogIn;","map":{"version":3,"sources":["/Users/vladikbaryshpolets/Desktop/Final_project_Online-store/src/store/auth/middleware.js"],"names":["axios","DOMAIN","clearRefreshTimer","logIn","logOut","updateWishlistCreator","initialState","wishlistInitialState","BASE_ENDPOINT","authLogIn","credentials","dispatch","res","post","then","data","status","localStorage","setItem","JSON","stringify","catch","error","response","authLogOut","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,YAAvB;AACA,SAASC,iBAAT,EAA4BC,KAA5B,EAAmCC,MAAnC,QAAiD,iBAAjD;AACA,OAAOC,qBAAP,MAAkC,2BAAlC;AACA,SAASC,YAAY,IAAIC,oBAAzB,QAAoD,qBAApD;AAEA,MAAMC,aAAa,GAAG,YAAtB;AAEA,OAAO,MAAMC,SAAS,GAAIC,WAAD,IAAiB,MAAOC,QAAP,IAAoB;AAC5D,QAAMC,GAAG,GAAG,MAAMZ,KAAK,CAACa,IAAN,CAAY,GAAEZ,MAAO,GAAEO,aAAc,QAArC,EAA8CE,WAA9C,EACfI,IADe,CACTC,IAAD,IAAU;AACd,QAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCC,IAAI,CAACC,SAAL,CAAeV,WAAf,CAApC;AACAC,MAAAA,QAAQ,CAACR,KAAK,EAAN,CAAR;AACD;;AACD,WAAOY,IAAP;AACD,GAPe,EAQfM,KARe,CAQRC,KAAD,IAAWA,KAAK,CAACC,QARR,CAAlB;AASA,SAAOX,GAAP;AACD,CAXM;AAaP,OAAO,MAAMY,UAAU,GAAG,MAAOb,QAAD,IAAc;AAC5CM,EAAAA,YAAY,CAACQ,UAAb,CAAwB,aAAxB;AACAR,EAAAA,YAAY,CAACQ,UAAb,CAAwB,OAAxB;AACAR,EAAAA,YAAY,CAACQ,UAAb,CAAwB,UAAxB;AACAd,EAAAA,QAAQ,CAACT,iBAAiB,EAAlB,CAAR;AACAS,EAAAA,QAAQ,CAACP,MAAM,EAAP,CAAR;AACAO,EAAAA,QAAQ,CAACN,qBAAqB,CAACE,oBAAD,CAAtB,CAAR;AACD,CAPM;AASP,eAAeE,SAAf","sourcesContent":["import axios from 'axios'\nimport { DOMAIN } from '../general'\nimport { clearRefreshTimer, logIn, logOut } from './actionCreator'\nimport updateWishlistCreator from '../wishlist/actionCreator'\nimport { initialState as wishlistInitialState} from '../wishlist/reducer'\n\nconst BASE_ENDPOINT = '/customers'\n\nexport const authLogIn = (credentials) => async (dispatch) => {\n  const res = await axios.post(`${DOMAIN}${BASE_ENDPOINT}/login`, credentials)\n    .then((data) => {\n      if (data.status === 200) {\n        localStorage.setItem('credentials', JSON.stringify(credentials))\n        dispatch(logIn())\n      }\n      return data\n    })\n    .catch((error) => error.response)\n  return res\n}\n\nexport const authLogOut = () => (dispatch) => {\n  localStorage.removeItem('credentials')\n  localStorage.removeItem('token')\n  localStorage.removeItem('wishlist')\n  dispatch(clearRefreshTimer())\n  dispatch(logOut())\n  dispatch(updateWishlistCreator(wishlistInitialState))\n}\n\nexport default authLogIn\n"]},"metadata":{},"sourceType":"module"}